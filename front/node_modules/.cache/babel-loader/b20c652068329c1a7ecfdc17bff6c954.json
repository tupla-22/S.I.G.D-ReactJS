{"ast":null,"code":"import _defineProperty from\"C:/xampp/htdocs/S.I.G.D-ReactJS/front/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/xampp/htdocs/S.I.G.D-ReactJS/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/xampp/htdocs/S.I.G.D-ReactJS/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/xampp/htdocs/S.I.G.D-ReactJS/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/xampp/htdocs/S.I.G.D-ReactJS/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Button}from'@mui/material';import TextField from'@mui/material/TextField';import{Box}from'@mui/system';import{useNavigate}from'react-router-dom';import Link from'./Link';import\"./styles/FormLogin.css\";import{useState}from'react';import RecoverPassword from'./RecoverPassword';import{helpHttp}from'../helpers/helpHttp';import{PAlert}from'./PAlert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormLogin=function FormLogin(){var _useState=useState({errors:false,correct:false}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState({password_usuario:null,ci_usuario:null}),_useState4=_slicedToArray(_useState3,2),usuario=_useState4[0],setUsuario=_useState4[1];var navigate=useNavigate();var regexUsuario=/^([0-9]){1,12}$/;var handleSubmit=function handleSubmit(e){var data=new URLSearchParams(usuario);var options={method:\"POST\",headers:{\"Content-type\":\"application/x-www-form-urlencoded;charset-UTF-8\"},body:data};if(!errors.errors){var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var resp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://apirest.com/usuarios?login=true&suffix=usuario\",options).then(function(e){return e.json();}).then(function(e){if(e.status==200){setErrors(_objectSpread(_objectSpread({},errors),{},{correct:false}));navigate(\"/admin/\".concat(e.result[0].ci_usuario,\"/homeAdmin\"));}else setErrors(_objectSpread(_objectSpread({},errors),{},{correct:true}));});case 2:resp=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return function getUser(){return _ref.apply(this,arguments);};}();getUser();}};var handleBlur=function handleBlur(e){if(!regexUsuario.test(usuario.ci_usuario.trim())){setErrors(_objectSpread(_objectSpread({},errors),{},{usuario:\"El campo cédula solo acepta números y hasta 8 caracteres\",vacio:true}));}else{setErrors(_objectSpread(_objectSpread({},errors),{},{usuario:\"\",vacio:false}));}};var handleChange=function handleChange(e){setUsuario(_objectSpread(_objectSpread({},usuario),{},_defineProperty({},e.target.name,e.target.value)));console.log(usuario);};return/*#__PURE__*/_jsxs(\"div\",{className:\"formLogin\",children:[errors.correct&&/*#__PURE__*/_jsx(PAlert,{children:\"C\\xE9dula o contrase\\xF1a incorrecta\"}),/*#__PURE__*/_jsx(TextField,{name:\"ci_usuario\",className:\"formLogin__input\",label:\"C\\xE9dula\",variant:\"outlined\",onChange:handleChange,onBlur:handleBlur}),errors.usuario&&/*#__PURE__*/_jsx(PAlert,{children:errors.usuario}),/*#__PURE__*/_jsx(TextField,{onChange:handleChange,name:\"password_usuario\",className:\"formLogin__input\",label:\"Contrase\\xF1a\",variant:\"outlined\",type:\"password\"}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(RecoverPassword,{children:\"\\xBFProblemas para iniciar sesi\\xF3n?\"})}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,variant:\"contained\",children:\"Entrar\"})]});};export default FormLogin;","map":{"version":3,"names":["Button","TextField","Box","useNavigate","Link","useState","RecoverPassword","helpHttp","PAlert","FormLogin","errors","correct","setErrors","password_usuario","ci_usuario","usuario","setUsuario","navigate","regexUsuario","handleSubmit","e","data","URLSearchParams","options","method","headers","body","getUser","fetch","then","json","status","result","resp","handleBlur","test","trim","vacio","handleChange","target","name","value","console","log"],"sources":["C:/xampp/htdocs/S.I.G.D-ReactJS/front/src/componentes/FormLogin.js"],"sourcesContent":["import { Button } from '@mui/material';\r\nimport TextField from '@mui/material/TextField'\r\nimport { Box } from '@mui/system';\r\nimport {useNavigate } from 'react-router-dom';\r\nimport Link from './Link';\r\nimport \"./styles/FormLogin.css\"\r\nimport { useState } from 'react';\r\nimport RecoverPassword from './RecoverPassword';\r\nimport { helpHttp } from '../helpers/helpHttp';\r\nimport { PAlert } from './PAlert';\r\n\r\nconst FormLogin = () => {\r\n  const [errors, setErrors] = useState({errors:false,correct:false});\r\n  const [usuario, setUsuario] = useState({password_usuario:null,ci_usuario:null});\r\n  const navigate = useNavigate();\r\n\r\n  const regexUsuario =/^([0-9]){1,12}$/;\r\n\r\n\r\n\r\n  const handleSubmit = (e) =>{\r\n    const data = new URLSearchParams(usuario);\r\n\r\n    const options ={\r\n      method:\"POST\",\r\n      headers:{\"Content-type\": \"application/x-www-form-urlencoded;charset-UTF-8\"},\r\n      body:data\r\n    }\r\n    if(!errors.errors){\r\n\r\n      const getUser = async ()=>{\r\n        const resp = await fetch(\"http://apirest.com/usuarios?login=true&suffix=usuario\",options).then(e=>e.json()).then(e=>{\r\n        if(e.status==200){\r\n          setErrors({...errors,correct:false});\r\n          navigate(`/admin/${e.result[0].ci_usuario}/homeAdmin`);\r\n\r\n          \r\n        }else setErrors({...errors,correct:true});\r\n\r\n        })\r\n      }\r\n      getUser();\r\n\r\n      \r\n    }\r\n  }\r\n\r\n\r\n  const handleBlur = (e) =>{\r\n    if(!regexUsuario.test(usuario.ci_usuario.trim())){\r\n      setErrors({...errors,\r\n        usuario:\"El campo cédula solo acepta números y hasta 8 caracteres\",\r\n        vacio:true\r\n      });\r\n    }else{setErrors({...errors,\r\n      usuario:\"\",\r\n      vacio:false\r\n    });}\r\n  }\r\n  const handleChange = (e) =>{ \r\n    setUsuario({...usuario,[e.target.name]:e.target.value});\r\n    console.log(usuario)\r\n  } \r\n\r\n    return ( \r\n        <div className=\"formLogin\">\r\n          {errors.correct && <PAlert>Cédula o contraseña incorrecta</PAlert>}\r\n        <TextField\r\n          name='ci_usuario'\r\n          className=\"formLogin__input\"\r\n          label=\"Cédula\"\r\n          variant='outlined'\r\n          onChange={handleChange}\r\n          onBlur={handleBlur}\r\n        />\r\n        {errors.usuario &&  <PAlert>{errors.usuario}</PAlert>}\r\n        <TextField\r\n        \r\n          onChange={handleChange}\r\n          name='password_usuario'\r\n          className=\"formLogin__input\"\r\n          label=\"Contraseña\"\r\n          variant='outlined'\r\n          type=\"password\"\r\n        />\r\n        <Box><RecoverPassword>¿Problemas para iniciar sesión?</RecoverPassword></Box>\r\n        <Button onClick={handleSubmit} variant='contained'>Entrar</Button>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default FormLogin;"],"mappings":"wnBAAA,OAASA,MAAT,KAAuB,eAAvB,CACA,MAAOC,UAAP,KAAsB,yBAAtB,CACA,OAASC,GAAT,KAAoB,aAApB,CACA,OAAQC,WAAR,KAA2B,kBAA3B,CACA,MAAOC,KAAP,KAAiB,QAAjB,CACA,MAAO,wBAAP,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,gBAAP,KAA4B,mBAA5B,CACA,OAASC,QAAT,KAAyB,qBAAzB,CACA,OAASC,MAAT,KAAuB,UAAvB,C,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CACtB,cAA4BJ,QAAQ,CAAC,CAACK,MAAM,CAAC,KAAR,CAAcC,OAAO,CAAC,KAAtB,CAAD,CAApC,wCAAOD,MAAP,eAAeE,SAAf,eACA,eAA8BP,QAAQ,CAAC,CAACQ,gBAAgB,CAAC,IAAlB,CAAuBC,UAAU,CAAC,IAAlC,CAAD,CAAtC,yCAAOC,OAAP,eAAgBC,UAAhB,eACA,GAAMC,SAAQ,CAAGd,WAAW,EAA5B,CAEA,GAAMe,aAAY,CAAE,iBAApB,CAIA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,CAAD,CAAM,CACzB,GAAMC,KAAI,CAAG,GAAIC,gBAAJ,CAAoBP,OAApB,CAAb,CAEA,GAAMQ,QAAO,CAAE,CACbC,MAAM,CAAC,MADM,CAEbC,OAAO,CAAC,CAAC,eAAgB,iDAAjB,CAFK,CAGbC,IAAI,CAACL,IAHQ,CAAf,CAKA,GAAG,CAACX,MAAM,CAACA,MAAX,CAAkB,CAEhB,GAAMiB,QAAO,4FAAG,oKACKC,MAAK,CAAC,uDAAD,CAAyDL,OAAzD,CAAL,CAAuEM,IAAvE,CAA4E,SAAAT,CAAC,QAAEA,EAAC,CAACU,IAAF,EAAF,EAA7E,EAAyFD,IAAzF,CAA8F,SAAAT,CAAC,CAAE,CACpH,GAAGA,CAAC,CAACW,MAAF,EAAU,GAAb,CAAiB,CACfnB,SAAS,gCAAKF,MAAL,MAAYC,OAAO,CAAC,KAApB,GAAT,CACAM,QAAQ,kBAAWG,CAAC,CAACY,MAAF,CAAS,CAAT,EAAYlB,UAAvB,eAAR,CAGD,CALD,IAKMF,UAAS,gCAAKF,MAAL,MAAYC,OAAO,CAAC,IAApB,GAAT,CAEL,CARkB,CADL,QACRsB,IADQ,qEAAH,kBAAPN,QAAO,0CAAb,CAWAA,OAAO,GAGR,CACF,CAzBD,CA4BA,GAAMO,WAAU,CAAG,QAAbA,WAAa,CAACd,CAAD,CAAM,CACvB,GAAG,CAACF,YAAY,CAACiB,IAAb,CAAkBpB,OAAO,CAACD,UAAR,CAAmBsB,IAAnB,EAAlB,CAAJ,CAAiD,CAC/CxB,SAAS,gCAAKF,MAAL,MACPK,OAAO,CAAC,0DADD,CAEPsB,KAAK,CAAC,IAFC,GAAT,CAID,CALD,IAKK,CAACzB,SAAS,gCAAKF,MAAL,MACbK,OAAO,CAAC,EADK,CAEbsB,KAAK,CAAC,KAFO,GAAT,CAGF,CACL,CAVD,CAWA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAAClB,CAAD,CAAM,CACzBJ,UAAU,gCAAKD,OAAL,wBAAcK,CAAC,CAACmB,MAAF,CAASC,IAAvB,CAA6BpB,CAAC,CAACmB,MAAF,CAASE,KAAtC,GAAV,CACAC,OAAO,CAACC,GAAR,CAAY5B,OAAZ,EACD,CAHD,CAKE,mBACI,aAAK,SAAS,CAAC,WAAf,WACGL,MAAM,CAACC,OAAP,eAAkB,KAAC,MAAD,mDADrB,cAEA,KAAC,SAAD,EACE,IAAI,CAAC,YADP,CAEE,SAAS,CAAC,kBAFZ,CAGE,KAAK,CAAC,WAHR,CAIE,OAAO,CAAC,UAJV,CAKE,QAAQ,CAAE2B,YALZ,CAME,MAAM,CAAEJ,UANV,EAFA,CAUCxB,MAAM,CAACK,OAAP,eAAmB,KAAC,MAAD,WAASL,MAAM,CAACK,OAAhB,EAVpB,cAWA,KAAC,SAAD,EAEE,QAAQ,CAAEuB,YAFZ,CAGE,IAAI,CAAC,kBAHP,CAIE,SAAS,CAAC,kBAJZ,CAKE,KAAK,CAAC,eALR,CAME,OAAO,CAAC,UANV,CAOE,IAAI,CAAC,UAPP,EAXA,cAoBA,KAAC,GAAD,wBAAK,KAAC,eAAD,oDAAL,EApBA,cAqBA,KAAC,MAAD,EAAQ,OAAO,CAAEnB,YAAjB,CAA+B,OAAO,CAAC,WAAvC,oBArBA,GADJ,CAyBH,CA9ED,CAgFA,cAAeV,UAAf"},"metadata":{},"sourceType":"module"}